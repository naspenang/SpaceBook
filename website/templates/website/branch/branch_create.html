{% extends "website/base.html" %}

{% block title %}Add Branch | SpaceBook{% endblock %}

{% block content %}
<div class="container py-5">
  <h2 class="mb-4">Add New UiTM Branch</h2>

  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}

    {{ form.non_field_errors }}

    <div class="mb-3 required">
      <label class="form-label" for="{{ form.name.id_for_label }}">
        {{ form.name.label }}
      </label>
      {{ form.name }}
      {{ form.name.errors }}
    </div>

    <div class="mb-3 required">
      <label class="form-label" for="{{ form.state.id_for_label }}">
        {{ form.state.label }}
      </label>
      {{ form.state }}
      {{ form.state.errors }}
    </div>

    <div class="mb-3 required">
      <label class="form-label" for="{{ form.code.id_for_label }}">
        {{ form.code.label }}
      </label>
      {{ form.code }}
      {{ form.code.errors }}
    </div>

    <div class="mb-3">
      <label class="form-label">{{ form.image.label }}</label>
      {{ form.image }}
      {{ form.image.errors }}
      <div class="form-text">
        Optional. JPG only. Maximum size: 2MB.
      </div>
    </div>


    <button type="submit" class="btn btn-primary">Save Branch</button>
    <a href="{% url 'home' %}" class="btn btn-secondary ms-2">Cancel</a>

    <script>
    const form = document.querySelector("form");
    if (form) {
      form.addEventListener("submit", function () {
        const buttons = form.querySelectorAll("button[type='submit']");
        buttons.forEach(btn => {
          btn.disabled = true;
          btn.innerText = "Processing...";
        });
      });
    }
  </script>

  </form>
</div>
{% endblock %}
